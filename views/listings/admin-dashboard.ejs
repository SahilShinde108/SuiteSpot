<% layout("/layouts/boilerplate") %>
<div class="row mt-3">
    <div class="col-10 offset-1">
        <h3>Admin Dashboard</h3>
        <p>Manage listing approvals here.</p>

        <ul class="nav nav-tabs mb-3" id="adminTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button" role="tab" aria-controls="pending" aria-selected="true">Pending (<%= pendingListings.length %>)</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="approved-tab" data-bs-toggle="tab" data-bs-target="#approved" type="button" role="tab" aria-controls="approved" aria-selected="false">Approved (<%= approvedListings.length %>)</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="rejected-tab" data-bs-toggle="tab" data-bs-target="#rejected" type="button" role="tab" aria-controls="rejected" aria-selected="false">Rejected (<%= rejectedListings.length %>)</button>
            </li>
        </ul>

        <div class="tab-content" id="adminTabsContent">
            <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
                <h4>Pending Listings</h4>
                <% if (pendingListings.length > 0) { %>
                    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
                        <% for(let listing of pendingListings) { %>
                            <div class="card col listing-card">
                                <img src="<%= listing.image %>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                                <div class="card-img-overlay"></div>
                                <div class="card-body">
                                    <p class="card-text"><b><%= listing.title %></b> <br>
                                        &#8377; <%= listing.price.toLocaleString("en-IN") %> / night
                                    </p>
                                    <a href="/listings/<%= listing.id %>" class="stretched-link"></a>
                                </div>
                            </div>
                        <% } %>
                    </div>
                <% } else { %>
                    <p>No pending listings.</p>
                <% } %>
            </div>
            <div class="tab-pane fade" id="approved" role="tabpanel" aria-labelledby="approved-tab">
                <h4>Approved Listings</h4>
                <% if (approvedListings.length > 0) { %>
                    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
                        <% for(let listing of approvedListings) { %>
                            <div class="card col listing-card">
                                <img src="<%= listing.image %>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                                <div class="card-img-overlay"></div>
                                <div class="card-body">
                                    <p class="card-text"><b><%= listing.title %></b> <br>
                                        &#8377; <%= listing.price.toLocaleString("en-IN") %> / night
                                    </p>
                                    <a href="/listings/<%= listing.id %>" class="stretched-link"></a>
                                </div>
                            </div>
                        <% } %>
                    </div>
                <% } else { %>
                    <p>No approved listings.</p>
                <% } %>
            </div>
            <div class="tab-pane fade" id="rejected" role="tabpanel" aria-labelledby="rejected-tab">
                <h4>Rejected Listings</h4>
                <% if (rejectedListings.length > 0) { %>
                    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
                        <% for(let listing of rejectedListings) { %>
                            <div class="card col listing-card">
                                <img src="<%= listing.image %>" class="card-img-top" alt="listing_image" style="height: 20rem;">
                                <div class="card-img-overlay"></div>
                                <div class="card-body">
                                    <p class="card-text"><b><%= listing.title %></b> <br>
                                        &#8377; <%= listing.price.toLocaleString("en-IN") %> / night
                                    </p>
                                    <a href="/listings/<%= listing.id %>" class="stretched-link"></a>
                                </div>
                            </div>
                        <% } %>
                    </div>
                <% } else { %>
                    <p>No rejected listings.</p>
                <% } %>
            </div>
        </div>
    </div>
</div>